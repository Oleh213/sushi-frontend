<div class="container" >
  <div class="left">
    <div class="title">Оформлення замовлення</div>
    <div class='userInfo-title-container edition'>
      <div class='items-title'><span class="number"><span>1</span></span>Контактна інформація</div>
    </div>
      <div class="userInfo">
        <div class="name block">
          <label class="input">
            <input class="input__field" [(ngModel)]="contactInfo.name" type="text" placeholder=" "  />
            <span class="input__label">Імʼя *</span>
          </label>
        </div>
        <div class="phoneNumber block">
          <label class="input">
            <input class="input__field" [(ngModel)]="contactInfo.phoneNumber" type="text" placeholder=" " />
            <span class="input__label">Телефон *</span>
          </label>
        </div>
        <div class="surname block">
          <label class="input">
            <input class="input__field" [(ngModel)]="contactInfo.surName" type="text" placeholder=" "  />
            <span class="input__label">Прізвище</span>
          </label>
        </div>
        <div class="email block">
          <label class="input">
            <input class="input__field" type="text" placeholder=" "  [(ngModel)]="contactInfo.email"/>
            <span class="input__label" >E-mail адреса </span>
          </label>
        </div>
      </div>
    <div class='delivery-title-container edition'>
      <div class='items-title'><span class="number"><span>2</span></span>Деталі доставки</div>
    </div>
    <div class="delivery-container">
      <div class="deliveryOptions">
          <div class="picUp-container deliveryOption" (click)="changeDeliveryOption('picUp')">
            <div class="border"><div class="dot" *ngIf="deliveryOption.deliveryType === DeliveryType.PicUp"></div></div>
            <label class="text">Самовивіз</label>
          </div>
          <div class="deliveryOrder-container deliveryOption" (click)="changeDeliveryOption('delivery')">
            <div class="border"><div class="dot" *ngIf="deliveryOption.deliveryType === DeliveryType.OnAddress"></div></div>
            <label class="text">Доставка</label>
          </div>
        <div class="deliveryInfo" [ngClass]="{delivery: deliveryOption.deliveryType !== DeliveryType.OnAddress}">
          <div class="map" id="map">
          </div>
          <app-search
            *appSearchDerective="let options = options; let onSearchChange = onSearchChange"
            [options]="options"
            (searchTermChange)="onSearchChange($event)">
          </app-search>
          <div class="confirmAddress">
            <div class="button" >Підтвердити</div>
          </div>
        </div>
      </div>
    </div>
    <div class='delivery-title-container edition'>
      <div class='items-title'><span class="number"><span>3</span></span>Умови доставки</div>
    </div>
    <div class="deliveryTime">
      <div class="asap time" (click)="deliveryOption.deliveryTimeOptions = DeliveryTimeOptions.Asap">
        <div class="border"><div class="dot" *ngIf="deliveryOption.deliveryTimeOptions === DeliveryTimeOptions.Asap"></div></div>
        <label class="text">Якомога швидше</label>
      </div>
      <div class="choseTime time" (click)="deliveryOption.deliveryTimeOptions = DeliveryTimeOptions.OnTime">
        <div class="border"><div class="dot" *ngIf="deliveryOption.deliveryTimeOptions === DeliveryTimeOptions.OnTime"></div></div>
        <label class="text">На певну годину</label>
      </div>
      <div class="selectHour" *ngIf="deliveryOption.deliveryTimeOptions === DeliveryTimeOptions.OnTime">
        <select class="selector" [(ngModel)]="deliveryOption.deliveryTime">
          <option  *ngFor="let category of initialHours" >
            {{category.toLocaleTimeString()}}
          </option>
        </select>
      </div>
    </div>
    <div class='delivery-title-container edition'>
      <div class='items-title'><span class="number"><span>4</span></span>Метод оплати</div>
    </div>
    <div class="paymentMethod">
      <div class="cash payment" (click)="paymentMethod = PaymentMethod.Cash">
        <div class="border"><div class="dot" *ngIf="paymentMethod === PaymentMethod.Cash"></div></div>
        <label class="text">Готівкою</label>
      </div>
      <div class="cardInStore payment" (click)="paymentMethod = PaymentMethod.CardInStore">
        <div class="border"><div class="dot" *ngIf="paymentMethod === PaymentMethod.CardInStore"></div></div>
        <label class="text">Картою при отримуванні </label>
      </div>
      <div class="cardOnline payment" (click)="paymentMethod = PaymentMethod.CardOnline">
        <div class="border"><div class="dot" *ngIf="paymentMethod === PaymentMethod.CardOnline"></div></div>
        <label class="text">Картою онлайн</label>
      </div>
    </div>
  </div>
  <div class="right">
    <div class="orderInfo">
      <div class="subTotalPrice">
        <label class="lable">Загальна сума</label>
        <span class="price">{{subTotalPrice}} ₴</span>
      </div>
      <div class="discount" *ngIf="promoCode.promoDiscount>0">
        <label class="lable">Знижка</label>
        <span class="price">{{promoCode.promoDiscount}} ₴</span>
      </div>
      <div class="totalPrice">
        <label class="lable">РАЗОМ</label>
        <span class="price">{{totalPrice - promoCode.promoDiscount}}₴</span>
      </div>
      <div class="promoCode-container">
        <label class="promoLabel" (click)="openClosePromoField()">{{promoCode.promoField?'Не використовувати промокод': 'У мене є промокод'}}</label>
        <div class="promoCode" *ngIf="promoCode.promoField">
          <label class="input">
            <div class="input__field">
              <input class="input__field2" [(ngModel)]="promoCode.usedPromoCode" type="text" placeholder=" ">
              <div class="button" (click)="usePromoCode()">></div>
            </div>
            <span class="input__label">Промокод</span>
          </label>
        </div>
      </div>
      <div class="submit" [ngClass]="{'go': checkSubmit()}" (click)="makeOrder()">ЗАМОВИТИ</div>
    </div>
  </div>
</div>

<app-spinner></app-spinner>

